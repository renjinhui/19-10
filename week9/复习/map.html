<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    #map {
      height: 500px;
      height: 800px;
    }
  </style>
</head>

<body>
  <div id='map'></div>
</body>

</html>
<script src="./map.js"></script>
<script src="./area.js"></script>
<script src="../node_modules/echarts/dist/echarts.js"></script>
<script>
  let $el = document.getElementById('map')
  const provinces = area.areaTree[0].children;
  const result = [];
  const option = {
    title: {
      text: 'iphone销量',
      subtext: '纯属虚构',
      x: 'center'
    },
    tooltip: {
      trigger: 'item'
    },
    legend: {
      orient: 'vertical',
      x: 'left',
      data: ['iphone3', 'iphone4', 'iphone5']
    },
    dataRange: {
      min: 0,
      max: 2500,
      x: 'left',
      y: 'bottom',
      text: ['高', '低'], // 文本，默认为数值文本
      calculable: true
    },
    toolbox: {
      show: true,
      orient: 'vertical',
      x: 'right',
      y: 'center',
      feature: {
        mark: {
          show: true
        },
        dataView: {
          show: true,
          readOnly: false
        },
        restore: {
          show: true
        },
        saveAsImage: {
          show: true
        }
      }
    },
    roamController: {
      show: true,
      x: 'right',
      mapTypeControl: {
        'china': true
      }
    },
    series: [{
        name: 'iphone3',
        type: 'map',
        mapType: 'china',
        roam: false,
        itemStyle: {
          normal: {
            label: {
              show: true
            }
          },
          emphasis: {
            label: {
              show: true
            }
          }
        },
        data: [{
            name: '北京',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '天津',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '上海',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '重庆',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '河北',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '河南',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '云南',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '辽宁',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '黑龙江',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '湖南',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '安徽',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '山东',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '新疆',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '江苏',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '浙江',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '江西',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '湖北',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '广西',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '甘肃',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '山西',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '内蒙古',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '陕西',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '吉林',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '福建',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '贵州',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '广东',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '青海',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '西藏',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '四川',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '宁夏',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '海南',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '台湾',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '香港',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '澳门',
            value: Math.round(Math.random() * 1000)
          }
        ]
      },
      {
        name: 'iphone4',
        type: 'map',
        mapType: 'china',
        itemStyle: {
          normal: {
            label: {
              show: true
            }
          },
          emphasis: {
            label: {
              show: true
            }
          }
        },
        data: [{
            name: '北京',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '天津',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '上海',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '重庆',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '河北',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '安徽',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '新疆',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '浙江',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '江西',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '山西',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '内蒙古',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '吉林',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '福建',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '广东',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '西藏',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '四川',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '宁夏',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '香港',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '澳门',
            value: Math.round(Math.random() * 1000)
          }
        ]
      },
      {
        name: 'iphone5',
        type: 'map',
        mapType: 'china',
        itemStyle: {
          normal: {
            label: {
              show: true
            }
          },
          emphasis: {
            label: {
              show: true
            }
          }
        },
        data: [{
            name: '北京',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '天津',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '上海',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '广东',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '台湾',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '香港',
            value: Math.round(Math.random() * 1000)
          },
          {
            name: '澳门',
            value: Math.round(Math.random() * 1000)
          }
        ]
      }
    ]
  };

  provinces.forEach(p => {
    result.push({
      name: p.name,
      value: p.total.confirm
    })
  })
  // const options = echarts.registerMap('china', data);
  const obj = {
    visualMap: {
      show: true,
      type: 'piecewise',
      min: 0,
      max: 2000,
      align: 'right',
      top: 0,
      right: 0,
      left: 'auto',
      inRange: {
        color: [
          '#ffc0b1',
          '#ff8c71',
          '#ef1717',
          '#9c0505'
        ]
      },
      pieces: [{
          min: 1000
        },
        {
          min: 500,
          max: 999
        },
        {
          min: 100,
          max: 499
        },
        {
          min: 10,
          max: 99
        },
        {
          min: 1,
          max: 9
        }
      ],
      orient: 'vertical',
      showLabel: true,
      itemWidth: 10,
      itemHeight: 10,
      textStyle: {
        fontSize: 10
      }
    },
    series: [{
      left: 'center',
      type: 'map',
      name: '确诊人数',
      label: {
        show: true,
        position: 'inside',
        fontSize: 6
      },
      mapType: 'china',
      data: provinces,
      zoom: 1.2,
      roam: false,
      showLegendSymbol: false,
      emphasis: {},
      rippleEffect: {
        show: true,
        brushType: 'stroke',
        scale: 2.5,
        period: 4
      }
    }]
  }
  const chart = echarts.init($el, option);
</script>